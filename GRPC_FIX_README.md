# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é gRPC

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–ü—Ä–æ—Ç–æ–±—É—Ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `GraphPartResponse` –∏–∑–º–µ–Ω–µ–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ backend proto
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `oneof` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω: `GraphStatus` ‚Üí `ParseStatus`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–ø–µ—á–∞—Ç–∫–∞: `ARCHITECTURE` ‚Üí `ARHITECTURE` (–∫–∞–∫ –≤ proto)

### 2. **–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Protobuf**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
  - `decodeGraphPartRequirements()`
  - `decodeGraphPartEndpoints()`
  - `decodeGraphPartArchitecture()`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `readLengthDelimited()` –¥–ª—è —á—Ç–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞**
–ë—ã–ª–æ:
```javascript
{
  status: 1,
  requirements: ["fastapi", ...],
  endpoints: {...}
}
```

–°—Ç–∞–ª–æ:
```javascript
{
  task_id: 242,
  response_id: 1,
  status: 1, // ParseStatus
  requirements: [...], // –∏–∑ graph_requirements.requirements
  endpoints: {...}     // –∏–∑ graph_endpoints.endpoints
}
```

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
```bash
npm run dev
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:5173

3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console (F12)

4. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `test-grpc-console.js`

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:
```javascript
testGrpcConnection(9, 242)
// –≥–¥–µ 9 = –≤–∞—à user_id, 242 = project_id
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ UI (–ø–æ–ª–Ω—ã–π —Ñ–ª–æ—É)

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
```bash
npm run dev
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173

3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (–∑–∞–≥—Ä—É–∑–∏—Ç–µ .zip —Ñ–∞–π–ª)

5. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è gRPC –∞–Ω–∞–ª–∏–∑

6. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤:
```
üì§ –û–¢–ü–†–ê–í–ö–ê gRPC –ó–ê–ü–†–û–°–ê
üë§ User ID: 9
üìã Project ID: 242
...
üì¨ Message #1: {status: 'START'}
üì¨ Message #2: {status: 'REQUIREMENTS', requirements: [...]}
üì¨ Message #3: {status: 'ENDPOINTS', endpoints: {...}}
üì¨ Message #4: {status: 'ARHITECTURE', parent: '...', children: [...]}
...
üì¨ Message #N: {status: 'DONE'}
‚úÖ –ü–æ–ª—É—á–µ–Ω —Å—Ç–∞—Ç—É—Å DONE - stream –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
```

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

```
1. üì§ –û–¢–ü–†–ê–í–ö–ê gRPC –ó–ê–ü–†–û–°–ê
2. üì• –ü–û–õ–£–ß–ï–ù –û–¢–í–ï–¢ (HTTP 200)
3. üì¨ Message #1: status=START
4. üì¨ Message #2: status=REQUIREMENTS
5. üì¨ Message #3: status=ENDPOINTS
6. üì¨ Messages #4-N: status=ARHITECTURE
7. üì¨ Message #N+1: status=DONE
8. ‚úÖ Stream –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
```

### ‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∞:

**ERR_EMPTY_RESPONSE:**
- Backend (Envoy/Core) –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `docker ps | grep -E "envoy|core"`
- –õ–æ–≥–∏: `docker logs envoy` –∏ `docker logs core-service`

**504 Gateway Timeout:**
- Backend –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Core: `docker logs -f core-service | grep "RunAlgorithm"`

**–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –°–º–æ—Ç—Ä–µ—Ç—å –≤ Console: –¥–µ—Ç–∞–ª–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å proto —Ñ–∞–π–ª—ã –≤ backend: `/proto/shared/common.proto`

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Frontend:
- `src/services/grpcClient.js` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–µ–∫–æ–¥–µ—Ä
- `FLOW_DIAGRAM_FOR_BACKEND.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `test-grpc-console.js` - –Ω–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

### –ß—Ç–æ –ù–ï –º–µ–Ω—è–ª–æ—Å—å:
- `vite.config.js` - proxy –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏
- `.env` - VITE_GRPC_URL –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º
- REST API endpoints - —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "Cannot read property 'requirements' of undefined"
**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è grpcClient.js –≤ –∫—ç—à–µ  
**–†–µ—à–µ–Ω–∏–µ:** Hard reload (Ctrl+Shift+R) –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à

### 2. "status=3" –Ω–æ –Ω–µ—Ç parent/children
**–ü—Ä–∏—á–∏–Ω–∞:** Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ARHITECTURE  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend –ª–æ–≥–∏ - –≤–æ–∑–º–æ–∂–Ω–æ –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 3. –ü–æ–ª—É—á–∞–µ–º START, –Ω–æ –¥–∞–ª—å—à–µ –Ω–∏—á–µ–≥–æ
**–ü—Ä–∏—á–∏–Ω–∞:** Backend –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ  
**–†–µ—à–µ–Ω–∏–µ:** `docker logs -f core-service` - —Å–º–æ—Ç—Ä–µ—Ç—å traceback

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- Frontend: https://github.com/PiaPav/frontend
- Backend: https://github.com/PiaPav/backend-main

**–î–ª—è backend –∫–æ–º–∞–Ω–¥—ã:**
–°–º–æ—Ç—Ä–∏—Ç–µ `FLOW_DIAGRAM_FOR_BACKEND.md` - —Ç–∞–º –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
