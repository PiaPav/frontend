# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Content-Type –¥–ª—è multipart/form-data

**–ë—ã–ª–æ:**
```javascript
const response = await api.post('/project', formData, {
  headers: {
    'Content-Type': 'multipart/form-data',  // ‚ùå –±–µ–∑ boundary
  },
  params: { name, description },
});
```

**–°—Ç–∞–ª–æ:**
```javascript
const response = await api.post('/project', formData, {
  // ‚úÖ headers –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º - –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –¥–æ–±–∞–≤–∏—Ç boundary
  params: { name, description },
});
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –ö–æ–≥–¥–∞ –≤—ã –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ `Content-Type: multipart/form-data`, –±—Ä–∞—É–∑–µ—Ä –ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç `boundary`
- FastAPI –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å multipart –±–µ–∑ boundary
- Backend –≤–∏–¥–∏—Ç —á—Ç–æ `file` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 422 (field required)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ë–∏—Ç—ã–π base64 –¥–ª—è –ø—É—Å—Ç–æ–≥–æ ZIP

**–ë—ã–ª–æ:**
```javascript
if (projectData.file) {
  formData.append('file', projectData.file);
} else {
  const emptyZipBase64 = 'UEsDBBQA...gAAAA...'; // ‚ùå –±–∏—Ç—ã–π base64
  // ...
}
```

**–°—Ç–∞–ª–æ:**
```javascript
if (!projectData.file) {
  throw new Error('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å ZIP-—Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏');
}
formData.append('file', projectData.file);
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- Backend API —Ç—Ä–µ–±—É–µ—Ç `file: UploadFile = File(...)` - –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
- –ë–∏—Ç—ã–π base64 –≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫—É `atob()` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–æ—â–µ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑ —Ñ–∞–π–ª–∞, —á–µ–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—É—Å—Ç–æ–π ZIP

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ** - –ø–æ–Ω—è—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω
‚úÖ **–û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤** - –ø—Ä–∏ –Ω–æ–≤–æ–π –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–≥–∏ –æ—á–∏—â–∞—é—Ç—Å—è
‚úÖ **–û–±–Ω–æ–≤–ª—ë–Ω UI** - –ø–æ–ª–µ —Ñ–∞–π–ª–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ (*)
‚úÖ **Accept —Ç–æ–ª—å–∫–æ ZIP** - `.zip,application/zip,application/x-zip-compressed`

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
npm run dev
# http://localhost:5173
```

### 2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É

### 3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
- –ù–∞–∂–º–∏—Ç–µ **"New Project"**
- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
  - **–ù–∞–∑–≤–∞–Ω–∏–µ**: Test Project
  - **–û–ø–∏—Å–∞–Ω–∏–µ**: Testing gRPC
  - **–§–∞–π–ª**: –≤—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π .zip —Å –∫–æ–¥–æ–º
- –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

### 4. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

**–í –ª–æ–≥–∞—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**
```
[22:00:01] üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ backend —á–µ—Ä–µ–∑ REST API...
[22:00:01] –ù–∞–∑–≤–∞–Ω–∏–µ: "Test Project", –û–ø–∏—Å–∞–Ω–∏–µ: "Testing gRPC"
[22:00:01] –§–∞–π–ª: project.zip (2.34 MB)
[22:00:03] ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ! {project_id: 267}
[22:00:03] üì° –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ gRPC stream –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞...
[22:00:03] User ID: 9, Project ID: 267
[22:00:05] üé¨ gRPC –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ - –Ω–∞—á–∞–ª—Å—è –∞–Ω–∞–ª–∏–∑
[22:00:08] üìã –ü–æ–ª—É—á–µ–Ω—ã Requirements (X —à—Ç.)
[22:00:10] üîó –ü–æ–ª—É—á–µ–Ω—ã Endpoints (Y —à—Ç.)
[22:00:12] üèóÔ∏è Architecture —á–∞—Å—Ç–∏...
[22:00:15] ‚úÖ gRPC Stream –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!
```

**–í Network Tab (F12):**
- `POST /v1/project` ‚Üí **200 OK** (–Ω–µ 422!)
- `POST /grpc/core.api.FrontendStreamService/RunAlgorithm` ‚Üí **200 OK** (streaming)

## ‚ùå –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ 422 –Ω–∞ /v1/project:
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å ‚Üí Request Headers ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary...
```
–î–æ–ª–∂–µ–Ω –±—ã—Ç—å `boundary=...`. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç - –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å.

### –ï—Å–ª–∏ gRPC timeout:
–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ backend (Algorithm service –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç).
–û—Ç–ø—Ä–∞–≤—å—Ç–µ backend –∫–æ–º–∞–Ω–¥–µ:
```bash
docker logs algorithm-service | tail -50
docker logs core-service | grep "RunAlgorithm"
```

## üìä Checklist:

- [x] –£–±—Ä–∞–Ω —Ä—É—á–Ω–æ–π `Content-Type: multipart/form-data`
- [x] –£–±—Ä–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å –±–∏—Ç—ã–º base64
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è "—Ñ–∞–π–ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω"
- [x] –û–±–Ω–æ–≤–ª—ë–Ω UI —Å –ø–æ–º–µ—Ç–∫–æ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è
- [x] Accept —Ç–æ–ª—å–∫–æ .zip —Ñ–∞–π–ª—ã
- [x] –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
- [x] –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## üéØ –ò—Ç–æ–≥:

**Frontend —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
1. ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç multipart/form-data —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º boundary
2. ‚úÖ –¢—Ä–µ–±—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª (–∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç backend)
3. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
4. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏!
